<h2>Lista de todo los post</h2>
<p>Aqui Podras eliminar, agregar, y borrar tus post</p>
<div class="container-btn-new">
   <button mat-stroked-button (click)="onNewPost()" matTooltip="Agrega un nuevo post">
      <mat-icon class="mat-18">note_add</mat-icon>&nbsp;New Post
   </button>
</div>

<mat-form-field>
   <input matInput (keyup)="applyFilter($event.target.value)" placeholder="Filter">
</mat-form-field>
<ng-container *ngIf="this.postSvc.isLoad == this.postSvc.isLoadtotal; else loadPost"></ng-container>
<ng-template #loadPost>
   <div class="spinner-wrap">
      <mat-progress-bar mode="determinate" color="warn" [value]="this.postSvc.isLoad"></mat-progress-bar>
   </div>
</ng-template>

<table mat-table [dataSource]="dataSource" class="mat-elevation-z8" matSort>

   <ng-container matColumnDef="statusPost">
      <th mat-header-cell *matHeaderCellDef mat-sort-header>Estado</th>
      <td mat-cell *matCellDef="let element">

         <button mat-icon-button *ngIf="isAdmin == true; else deny"
                  mat-stroked-button
                  [ngClass]="element.statusPost ? 'active' : 'pending' "
                  (click)="onStatusPost(element)"
         >
            <mat-icon class="mat-18">visibility</mat-icon>
         </button>



         <ng-template #deny >
            <button mat-icon-button mat-stroked-button  class="pending" matTooltip="Pendiente" *ngIf="element.statusPost == false && element.userUid == userUid; else statusActive">
               <mat-icon class="mat-18">visibility_off</mat-icon>
            </button>
         </ng-template>
         <ng-template #statusActive>
            <button mat-icon-button mat-stroked-button class="active" *ngIf="element.statusPost == true && element.userUid == userUid; else default">
               <mat-icon class="mat-18">visibility</mat-icon>
            </button>
         </ng-template>
         <ng-template #default>
            <button mat-icon-button mat-stroked-button color="accent" matTooltip="Restringido" >
               <mat-icon class="mat-18">block</mat-icon>
            </button>
         </ng-template>
      </td>
   </ng-container>

   <ng-container matColumnDef="titlePost">
      <th mat-header-cell *matHeaderCellDef mat-sort-header> Post Titulo </th>
      <td mat-cell *matCellDef="let element"> {{element.titlePost}} </td>
   </ng-container>

   <ng-container matColumnDef="tagsPost">
      <th mat-header-cell *matHeaderCellDef > Lista de Tags </th>
      <td mat-cell *matCellDef="let element"> {{element.tagsPost}} </td>
   </ng-container>

   <ng-container matColumnDef="datePost">
      <th mat-header-cell *matHeaderCellDef > Fecha </th>
      <td mat-cell *matCellDef="let element"> {{element.datePost}} </td>
   </ng-container>

   <ng-container matColumnDef="actions">
      <th mat-header-cell *matHeaderCellDef > Accion </th>
      <td mat-cell *matCellDef="let element">
         <button mat-icon-button *ngIf="element.userUid == userUid || isAdmin == true; else noOwner" mat-stroked-button color="accent" (click)="onEditPost(element)">
            <mat-icon class="mat-18">edit</mat-icon>
         </button>
         <ng-template #noOwner>
            <button mat-icon-button mat-stroked-button color="accent" disabled="true">
               <mat-icon class="mat-18">edit</mat-icon>
            </button>
         </ng-template>

            <button mat-icon-button *ngIf="element.userUid == userUid || isAdmin == true; else noAdmin" mat-stroked-button color="warn" (click)="onDeletePost(element)">
               <mat-icon class="mat-18">delete</mat-icon>
            </button>
            <ng-template #noAdmin>
               <button mat-icon-button mat-stroked-button color="warn" disabled="true">
                  <mat-icon class="mat-18">delete</mat-icon>
               </button>
            </ng-template>
      </td>
   </ng-container>

   <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
   <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
</table>
<mat-paginator [pageSizeOptions]="[10, 20]" showFirstLastButtons></mat-paginator>

